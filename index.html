<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>GTA Chinatown Wars - Real Emulator</title>
<style>
  html, body {
    margin: 0; padding: 0;
    background: black;
    color: lightgray;
    font-family: monospace, monospace;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
  }
  #romfile {
    margin: 1em;
    color: lightgray;
    background: #222;
    border: 1px solid #555;
    padding: 0.5em;
  }
  #canvas {
    border: 1px solid lightgray;
    background: black;
  }
</style>
</head>
<body>
  <label for="romfile">Load your GTA Chinatown Wars USA ROM (.nds):</label>
  <input type="file" id="romfile" accept=".nds" />
  <canvas id="canvas" width="256" height="192"></canvas>

  <script src="https://cdn.jsdelivr.net/gh/ahezard/jsnds/jsnds.min.js"></script>
  <script>
    const canvas = document.getElementById('canvas');
    let emulator;

    document.getElementById('romfile').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if(!file) return;

      const reader = new FileReader();
      reader.onload = function() {
        const romData = new Uint8Array(reader.result);
        if(emulator) emulator.stop();

        emulator = new JSNDS({
          canvas: canvas,
          bios: null, // JSNDS can run without BIOS for many games
          rom: romData,
          onError: e => console.error(e),
        });

        emulator.start();
      }
      reader.readAsArrayBuffer(file);
    });
  </script>
</body>
</html>
